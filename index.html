<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Membrane - Quick Taps</title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
  <div class="container">
    <h1>Membrane</h1>

    <div id="auth-ui">
      <p id="logged-in-status">Not logged in.</p>
      <button id="google-signin-btn" class="btn">Sign in with Google</button>
      <button id="signout-btn" class="btn" style="display:none;">Sign Out</button>
    </div>

    <div class="tabs">
      <a href="index.html" class="tab-btn active">Quick Taps</a>
      <a href="sports.html" class="tab-btn">Sports</a>
      <a href="objectifs.html" class="tab-btn">Objectifs</a>
      <a href="Project_Manager.html" class="tab-btn">Project Manager</a>
    </div>

    <div class="card">
        <h2>Quick Taps</h2>

        <div class="scroll-box">
            <ul id="quickTaps_list"></ul>
        </div>

        <div class="form-grid">
            <input id="quickTaps_input" type="text" placeholder="Type an idea here">
            <textarea id="quickTaps_description" placeholder="Description"></textarea>
            <button id="quickTaps_button" class="btn">Add/Save</button>
        </div>
    </div>
  </div>

<script src="index.js"></script>
<script type="module">
  import { signInWithGoogle, signOutUser, setupAuthListener } from './firebase-init.js';

  const signInButton = document.getElementById('google-signin-btn');
  const signOutButton = document.getElementById('signout-btn');
  const loggedInStatus = document.getElementById('logged-in-status');

  signInButton.addEventListener('click', signInWithGoogle);
  signOutButton.addEventListener('click', signOutUser);

  setupAuthListener((user) => {
    if (user) {
      loggedInStatus.textContent = `Logged in as: ${user.displayName} (${user.email})`;
      signInButton.style.display = 'none';
      signOutButton.style.display = 'block';
    } else {
      loggedInStatus.textContent = 'Not logged in.';
      signInButton.style.display = 'block';
      signOutButton.style.display = 'none';
    }
  });
</script>

</body>
</html>